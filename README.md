# Интернет-магазин посуды TableFair

FullStack SSR приложение для покупки и продажи товаров через интернет.

#### Посмотреть интернет-магазин можно по [ссылке]()

#### Посмотреть API (Swagger) приложения можно по [ссылке]()

_*Данные для входа:*_  
Email: `test@mail.ru`  
Пароль: `test1234`

## Используемый стек

### Frontend:

- NextJS
- TypeScript
- Redux-Toolkit
- Axios
- Formik
- Ant Design
- SCSS Modules
- Docker

### Backend:

- NodeJs
- NestJS
- TypeScript
- PostgreSQL
- Sequelize
- OpenAPI (Swagger)
- Docker

## Описание работы приложения

### Авторизация и аутентификация:

1. При авторизации и аутентификации, введенные пользователем данные проходят двойную валидацию как на _frontend_ (`formik`), так и на _backend_ (`class-validator`).
2. Для авторизации необходимо ввести свои данные по форме регистрации.
3. При аутентификации проверяется существование почты в БД и происходит сверка паролей (пароли пользователей в БД хешированные с помощью пакета `bcrypt`), далее отправляются два токена: _access_ и _refresh_.  
   Токены генерируются с помощью пакета `jsonwebtoken`
4. При отсутствии токенов или истечения их жизни у пользователя нет доступа к запросам.
5. Если истекло время жизни у _access_ токена, то автоматически отправляется запрос на его обновление. Для этого проверяется существование _refresh_ токена в БД. При наличии живого токена опять генерируются и отправляются пара: _access_ и _refresh_.

### Главная страница и страница каталога:

1. На главной странице отображены новинки и популярные товары. Логика построена таким образом, что в разделе новинки показываются последние добавленные товары, а в популярных происходит фильтрация по рейтингу и по количеству отзывов. Чем больше рейтинг и больше отзывов, тем товар считается популярнее.
2. На странице каталога отображаются товары из этого каталога. Имеется пагинация по страницам, сортировка по цене и популярности для удобства просмотра и выбора.
3. При нажатии на зону карточки товара открывается страница продукта.

### Страница продукта:

1. Данная страница генерируется на сервере после чего отправляется на клиентскую сторону. Здесь указаны характеристики продукта, цена и дополнительная информация. Также можно оставить отзыв и оценить товар.
2. Отзыв может оставлять, только авторизованный пользователь по правилу: "Один товар - один отзыв".
3. Товар нельзя добавлять по несколько раз в корзину. Если необходимо изменить количество, то можно это сделать в корзине.

### Страница корзины:

1. Здесь отображаются добавленные товары. Можно изменить количество или удалить товар. Также после изменений происходит автоматический подсчет суммы товаров.
2. Чтобы выполнить заказ необходимо авторизоваться и ввести свой адрес.
3. После выполнения заказа, информация о нём появится в разделе "Мои заказы"(требуется обновление страницы).

### Роли:

В приложении имеется две роли пользователей:

- _USER_
- _ADMIN_

Пользователь без роли может смотреть товары и добавлять их в корзину.  
Авторизованный пользователь получает роль _USER_. Он может дополнительно делать заказ, смотреть информацию по своим заказам и оставлять отзывы по товарам.  
_ADMIN_ же, может добавлять товары, каталоги и удалять товары с помощью админ-панели. Ему недоступна корзина, так как он не может заказывать товары и он не может оставлять отзывы.

### Админ-панель:

Панель состоит из трех вкладок с разным назначением. Администратор здесь может добавить товар, удалить товар и добавить каталог. Ниже приведены скриншоты админ-панели.
![admin_1](/readme_files/admin_1.jpg)  
На всех формах проходит валидация значений, как на _frontend_, так и на _backend_. Есть возможность добавлять сколько угодно характеристик и также их удалять.
![admin_2](/readme_files/admin_2.jpg)  
![admin_3](/readme_files/admin_3.jpg)

### Другие особенности:

1. Приложение упаковано в `Docker`.
1. Приложение адаптивное к разным размерам экранов.
1. Архитектура приложения постоена таким образом, чтобы в дальнейшем легко можно было её масштабировать.
